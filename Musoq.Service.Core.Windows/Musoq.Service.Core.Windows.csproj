<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <OutputType>Exe</OutputType>
    <TargetFramework>netcoreapp2.0</TargetFramework>
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Include="Microsoft.AspNet.WebApi.Client" Version="5.2.6" />
    <PackageReference Include="Microsoft.AspNetCore" Version="2.0.3" />
    <PackageReference Include="Microsoft.AspNetCore.Hosting.WindowsServices" Version="2.0.3" />
    <PackageReference Include="Microsoft.AspNetCore.Mvc" Version="2.0.4" />
    <PackageReference Include="Microsoft.CodeAnalysis" Version="2.8.2" />
    <PackageReference Include="System.Runtime.Loader" Version="4.3.0" />
  </ItemGroup>

  <ItemGroup>
    <ProjectReference Include="..\Musoq.Plugins\Musoq.Plugins.csproj" />
    <ProjectReference Include="..\Musoq.Schema\Musoq.Schema.csproj" />
    <ProjectReference Include="..\Musoq.Service.Core\Musoq.Service.Core.csproj" />
  </ItemGroup>

  <ItemGroup>
    <Reference Include="CacheManager.Core">
      <HintPath>..\..\..\..\.nuget\packages\cachemanager.core\1.1.2\lib\net45\CacheManager.Core.dll</HintPath>
    </Reference>
    <Reference Include="Owin">
      <HintPath>..\..\..\..\.nuget\packages\owin\1.0.0\lib\net40\Owin.dll</HintPath>
    </Reference>
    <Reference Include="System.Web.Http">
      <HintPath>..\..\..\..\.nuget\packages\microsoft.aspnet.webapi.core\5.2.6\lib\net45\System.Web.Http.dll</HintPath>
    </Reference>
  </ItemGroup>

  <Target Name="PostBuild" AfterTargets="PostBuildEvent">
    <Exec Command="if not exist &quot;$(TargetDir)\Plugins\Os\&quot; mkdir &quot;$(TargetDir)\Plugins\Os\&quot;&#xD;&#xA;Copy /Y &quot;$(SolutionDir)Musoq.Schema.Os\bin\$(ConfigurationName)\netcoreapp2.0\&quot; &quot;$(TargetDir)\Plugins\Os\&quot;&#xD;&#xA;if not exist &quot;$(TargetDir)\Plugins\Json\&quot; mkdir &quot;$(TargetDir)\Plugins\Json\&quot;&#xD;&#xA;Copy /Y &quot;$(SolutionDir)Musoq.Schema.Json\bin\$(ConfigurationName)\netcoreapp2.0\&quot; &quot;$(TargetDir)\Plugins\Json\&quot;&#xD;&#xA;if not exist &quot;$(TargetDir)\Plugins\Csv\&quot; mkdir &quot;$(TargetDir)\Plugins\Csv\&quot;&#xD;&#xA;Copy /Y &quot;$(SolutionDir)Musoq.Schema.Csv\bin\$(ConfigurationName)\netcoreapp2.0\&quot; &quot;$(TargetDir)\Plugins\Csv\&quot;&#xD;&#xA;if not exist &quot;$(TargetDir)\Plugins\FlatFile\&quot; mkdir &quot;$(TargetDir)\Plugins\FlatFile\&quot;&#xD;&#xA;Copy /Y &quot;$(SolutionDir)Musoq.Schema.FlatFile\bin\$(ConfigurationName)\netstandard2.0\&quot; &quot;$(TargetDir)\Plugins\FlatFile\&quot;&#xD;&#xA;if not exist &quot;$(TargetDir)\Plugins\Time\&quot; mkdir &quot;$(TargetDir)\Plugins\Time\&quot;&#xD;&#xA;xcopy &quot;$(SolutionDir)Musoq.Schema.Time.Core\bin\$(ConfigurationName)\*.*&quot; &quot;$(TargetDir)\Plugins\Time\&quot; /Y /I /E" />
  </Target>

</Project>
